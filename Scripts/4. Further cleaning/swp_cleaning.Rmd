
# Set up

Import packages
```{r}
suppressPackageStartupMessages({
  suppressWarnings({
  library(tidyverse)   # Data wrangling
  library(here)        # File management
  library(readxl)      # Read excel files
  })})
```

Set settings and universal variables
```{r setup, include=FALSE}
knitr::opts_knit$set(root.dir = here())
```


# Import data

## Network data
Draft version of a network dataset of public water systems compiled by the team. 

```{r}
network = read_excel("Data/Source/Network data/Dataforprojectcolumncleaning_oct7.xlsx", na = "NA")

table(network$Source_type)
```

# Clean Project
```{r}
write.csv(network%>%
  filter(swp == 1)%>%
  select(1, Source, Source_summary, source_id, Source_type, Project:Purchased)%>%
  arrange(System_name), "Data/Outputs/20251007_swp_checks.csv", row.names = F)

network%>%
  filter(grepl("Butte county", Source, ignore.case = T))%>%
  select(1, 2, Source, source_id, Source_type)
```

FOUND in SWP contractors:
- Alameda County WD
- ANTELOPE VALLEY EAST KERN WATER AGENCY / ANTELOPE VALLEY E KERN WTR AGY-ROSAMOND
- City of Yuba City

Not found but source is there:
- CAL-WATER SERVICE CO.-OROVILLE (Butte County)
- CITY OF BENICIA	(Solano County Water Agency)
- CITY OF FAIRFIELD	(Solano County Water Agency)
- CITY OF VACAVILLE	(Solano County Water Agency)
- CITY OF VALLEJO	(Solano County Water Agency)
- CITY OF VALLEJO-LAKES SYSTEM (Solano County Water Agency)

Not found at all:
- AMERICAN CANYON, CITY OF (North Bay Aqueduct)
- BRITZ/COLUSA & BRITZ/FIVE POINT SYSTEM (California Aqueduct)
- CAL-WATER SERVICE CO.-OROVILLE (Lake Oroville)
- CENTRAL COAST WATER AUTHORITY (California Aqueduct)
- CITY OF DOS PALOS (California Aqueduct)
- CITY OF PORTOLA	(Lake Davis)
- CITY OF SACRAMENTO MAIN	(Sacramento River)
- CITY OF WEST SACRAMENTO	(Sacramento River)
- CLAWA	(Silverwood Lake)
- CWS - (KERNVILLE	Kern River)


```{r}
network%>%
  filter(System_name == "CITY OF VALLEJO")%>%
  select(1, PWSID, County, Source, Source_summary, source_id, Source_type, Project:Purchased)

network%>%
  filter(grepl("Butte", System_name, ignore.case = T))%>%
  select(1, PWSID, County, Source, Source_summary, source_id, Source_type, Project:Purchased)
```
