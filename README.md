# Overview
This repository cleans, processes, and adds various columns to our dataset of connections between surface water sources and community drinking water systems.

# Structure and Navigation
The 'Scripts/' folder contains all relevant code. Run scripts based on numerical order of subfolders

Scripts/ 
    
    ├── 1. Cleaning & processing/
    │   ├── initial_cleaning_of_network_data.Rmd      # Initial cleaning and processing of network data
    │   └── missing_source_lat_longs.Rmd              # Using SAFER Clearinghouse data to fill in lat/longs for sources with missing location data
    ├── 2. Generating new columns/
    │   ├── add_gw_variables_to_network_data.Rmd      # Generating variables characterising PWS groundwater access
    │   └── split_up_project_columns.Rmd              # Generating dummy variables indicating whether connections correspond to State Water Project, Central Valley Project, and Colorado River Aqueduct
    ├── 3. Joins/
    │   └── joining_in_intermediate_data.Rmd          # Joining all new columns back into network data
    ├── 4. Reviewing project columns/
    │   ├── swp_cvp_cleaning.Rmd                      # Exporting CVP/SWP systems for manual review, and joining reviewed systems back into master dataset
    │   └── project_column_loops.Rmd                  # Looping through sources purchased from PWSs to fill in project columns 
    ├── 5. Source ID creation & final cleaning
    │   └── source_id_creation.Rmd                    # Generating a unique ID for each source in final dataset
    ├── 6. Processing for ArcGIS Dashboard & Network
    │   ├── processing_for_network_igraph.Rmd         # Processing final master data into igraph format
    │   └── processing_for_arcgis_dashboard .Rmd      # Processing final master data into shapefiles for upload to ArcGIS Online
    └── 7. Network analysis
        └── initial_network_exploration.Rmd           # Initial exploratory analysis and visualisations of network data in igraph

# Data Sources

Network data: network dataset generated by our team, accessed via Box

SAFER Clearinghouse data
- This is an internal state water board dataset they shared with us for this project. All documentation is located in [this Google Drive folder](https://drive.google.com/drive/folders/1gxMrGeaOA_xtGb1zf97Z79EFEwKcIpCG).
- Unfortunately there is no data dictionary, but [Jenny has worked on developing one](https://docs.google.com/spreadsheets/d/1ulStajU7D1eFu2m3V0fTDtcm3PGNlneX/edit?gid=631545570#gid=631545570).
- 'SourceReporting' sheet used for geolocation data missing_source_lat_longs.Rmd, as well as to identify groundwater facilities in add_gw_variables_to_network_data.Rmd
- 'WaterSystemInformation' sheet used to filter for only facilities in community water systems in add_gw_variables_to_network_data.Rmd

EDT Data
- Drinking water quality data compiled by the State Water Resources Control Board and downloaded from [this page](https://www.waterboards.ca.gov/drinking_water/certlic/drinkingwater/EDTlibrary.html).
- Data dictionary is available [here](https://www.waterboards.ca.gov/drinking_water/certlic/drinkingwater/documents/edtlibrary/data_dictionary.pdf).
- Used to identify drinking water facilities with MCL violations in add_gw_variables_to_network_data.Rmd

Data dictionary for new columns [here](https://docs.google.com/spreadsheets/d/11Wzbw_Jr1k-WxoZu8n-r0eJ0FcPlr-ldpthPKmB1gL0/edit?gid=0#gid=0)
